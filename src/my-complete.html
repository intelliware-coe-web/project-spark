<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="my-stars.html">
<link rel="import" href="shared-styles.html">

<dom-module id="my-complete">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                padding: 10px;
            }
        </style>
        <div class="card">
            <div class="circle">1</div>
            <h1>Job Completed</h1>
            <my-stars value="{{rating}}"></my-stars>
        </div>

        <firebase-document path="/profiles/[[user.uid]]" data="{{profile}}"></firebase-document>
    </template>

    <script>
      class MyComplete extends Polymer.Element {
        static get is() {
          return 'my-complete';
        }

        static get properties() {
          return {
            rating: {
              type: Number,
              value: 3,
            },
            user: {
              type: Object,
              observer: '_userChanged'
            },
          };
        }

        _userChanged(newValue) {
          this.user = newValue;
        }

        ready() {
          super.ready();
          this.shadowRoot
            .querySelector('my-stars')
            .addEventListener('value-changed', this.onRatingChanged.bind(this));
        }

        onRatingChanged() {
          console.info(this.rating);
        }
      }

      window.customElements.define(MyComplete.is, MyComplete);

    </script>
</dom-module>
